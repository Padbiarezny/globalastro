<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GlobalAstro</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
    .container { max-width: 400px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    h1 { text-align: center; }
    label { display: block; margin-top: 10px; }
    input, select, button { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #007bff; color: white; border: none; margin-top: 20px; cursor: pointer; }
    button:hover { background: #0056b3; }
    .lang { margin-top: 10px; text-align: center; }
    .lang button { width: 48%; margin: 1%; }
    #result { white-space: pre-wrap; margin-top: 10px; }
  </style>
</head>
<body>
<div class="container">
  <h1 id="form-title">GlobalAstro</h1>

  <label id="label-dob">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è / Date of Birth</label>
  <input type="date" id="dob">

  <label id="label-place">–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è / Place of Birth</label>
  <input type="text" id="place">

  <label id="label-gender">–ü–æ–ª / Gender</label>
  <select id="gender">
    <option value="–º—É–∂—Å–∫–æ–π">–ú—É–∂—Å–∫–æ–π / Male</option>
    <option value="–∂–µ–Ω—Å–∫–∏–π">–ñ–µ–Ω—Å–∫–∏–π / Female</option>
  </select>

  <label id="label-time">–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) / Time of Birth (optional)</label>
  <input type="time" id="time">

  <button type="button" onclick="submitData()" id="get-horoscope-btn">–ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø / Get Horoscope</button>

  <div class="lang">
    <button onclick="setLang('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
    <button onclick="setLang('en')">üá¨üáß English</button>
  </div>
  <div id="result"></div>
</div>

<script>
function setLang(lang) {
  if (lang === 'ru') {
    document.getElementById("form-title").innerText = "GlobalAstro";
    document.getElementById("label-dob").innerText = "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è";
    document.getElementById("label-place").innerText = "–ú–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è";
    document.getElementById("label-gender").innerText = "–ü–æ–ª";
    document.getElementById("label-time").innerText = "–í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)";
    document.getElementById("get-horoscope-btn").innerText = "–ü–æ–ª—É—á–∏—Ç—å –≥–æ—Ä–æ—Å–∫–æ–ø";
  } else {
    document.getElementById("form-title").innerText = "GlobalAstro";
    document.getElementById("label-dob").innerText = "Date of Birth";
    document.getElementById("label-place").innerText = "Place of Birth";
    document.getElementById("label-gender").innerText = "Gender";
    document.getElementById("label-time").innerText = "Time of Birth (optional)";
    document.getElementById("get-horoscope-btn").innerText = "Get Horoscope";
  }
}

function submitData() {
  const dob = document.getElementById("dob").value;
  const place = document.getElementById("place").value;
  const gender = document.getElementById("gender").value;
  const time = document.getElementById("time").value;

  const data = {
    dob: dob,
    place: place,
    gender: gender,
    time: time,
    question: "–î–∞–π –º–Ω–µ –≥–æ—Ä–æ—Å–∫–æ–ø –Ω–∞ –±–ª–∏–∂–∞–π—à—É—é –Ω–µ–¥–µ–ª—é"
  };

  document.getElementById("result").innerText = "–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω... –∂–¥—ë–º –æ—Ç–≤–µ—Ç :)";

  fetch("https://globalastro.onrender.com/horoscope", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  })
    .then(response => response.json())
    .then(result => {
      if (result.response) {
        document.getElementById("result").innerText = result.response;
      } else if (result.error) {
        document.getElementById("result").innerText = "–û—à–∏–±–∫–∞: " + result.error;
      } else {
        document.getElementById("result").innerText = "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.";
      }
    })
    .catch(e => {
      document.getElementById("result").innerText = "–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: " + e;
    });
}
</script>
</body>
</html>
